set folder=~/Mail/		# where i keep my mailboxes
set spoolfile=+INBOX
set alias_file=~/.mutt/mail_aliases	# where I keep my aliases
set mailcap_path=~/.mutt/mailcap
set index_format="%4C %Z %{%m/%d} %-15.15F (%4c) %s" # format of the index
set mbox_type=maildir
set mime_forward		# use message/rfc822 type to forward messages
set postponed=+Drafts          # mailbox to store postponed messages in
set print_command=/bin/false	# how to print things (I like to save trees)
set read_inc=25			# show progress when reading a mailbox
set record=+Sent\ Items		# default location to save outgoing mail
set sort=threads		# primary sorting method
set sort_browser=reverse-date	# how to sort files in the dir browser
#set sort_browser=date
set sort_aux=last-date-received
set write_inc=25		# show progress while writing mailboxes
set markers=no #remove + on wrapped lines so that urxvt-launch-url works
set sendmail="/usr/bin/msmtp" #use msmtp instead of sendmail
#set from="from@address.ext"
set query_command=~/bin/mutt_ldap.pl
set header_cache=~/.mutt/cache/headers
set message_cachedir=~/.mutt/cache/bodies

alternative_order text/enriched text/plain text/html
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# Color definitions
#

#color normal white default
color hdrdefault red default
color quoted brightblue default
color signature red default
color indicator brightyellow red
color error brightred default
color status yellow blue
color tree magenta default	# the thread tree in the index menu
color tilde magenta default
color message brightcyan default
color markers brightcyan default
color attachment brightmagenta default
color search default green	# how to hilite search patterns in the pager

color header brightred default ^(From|Subject):
color body magenta default "(ftp|http|https)://[^ ]+"	# point out URLs
color body magenta default [-a-z_0-9.]+@[-a-z_0-9.]+	# e-mail addresses
color underline brightgreen default

# attributes when using a mono terminal
#mono header underline ^(From|Subject):
mono quoted bold

#source ~/.mutt/gruvbox.colors
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# Aliases
#
#	alias <name> <address> [ , <address> ... ]

#alias exam "\# to annoy michael" <user@host>
#alias me Michael Elkins <me@mutt.org> # me!
#alias mutt-dev Mutt Development List <mutt-dev@mutt.org> # power users
#alias mutt-users Mutt User List <mutt-users@mutt.org>
#alias mutt-announce Mutt Announcement List <mutt-announce@mutt.org>
#alias wmaker WindowMaker Mailing List <wmaker@eosys.com>
set sort_alias=alias
set reverse_alias=yes
source $alias_file
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# Mailboxes (generated by offlineimap)
source ~/.mutt/mailboxes

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# Misc.

source ~/.mutt/auto_view

# Bindings
# Generic
bind generic l select-entry
bind generic <right> select-entry

# Index
bind index N search-opposite
bind index l display-message
bind index <right> display-message
bind index h change-folder
bind index <left> change-folder
bind index H display-toggle-weed
macro index , '<change-folder>!^M'
macro index I '<tag-pattern>~N^M<tag-prefix><toggle-new><tag-prefix><tag-entry>'
bind index gg first-entry
bind index G last-entry
bind index R group-reply
macro index A "<limit>all\n" "show all messages"
bind index L limit

# Pager
bind pager N search-opposite
bind pager j next-line
bind pager k previous-line
bind pager h exit
bind pager l view-attachments
bind pager <down> next-line
bind pager <up> previous-line
bind pager <left> exit
bind pager <right> view-attachments
bind pager H display-toggle-weed
bind pager G bottom
bind pager gg top
macro pager , '<change-folder>!^M'

# Attach
bind attach l view-attach
bind attach <right> view-attach
bind attach h exit
bind attach <left> exit
bind attach H display-toggle-weed

# Compose
bind compose l view-attach
bind compose <right> view-attach
macro index S \
           "<enter-command>set my_old_pipe_decode=\$pipe_decode my_old_wait_key=\$wait_key nopipe_decode nowait_key<enter>\
           <shell-escape>notmuch-mutt -r --prompt search<enter>\
           <change-folder-readonly>`echo ${XDG_CACHE_HOME:-$HOME/.cache}/notmuch/mutt/results`<enter>\
           <enter-command>set pipe_decode=\$my_old_pipe_decode wait_key=\$my_old_wait_key<enter>" \
                 "notmuch: search mail"
